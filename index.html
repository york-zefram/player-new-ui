<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, viewport-fit=cover">
    <title>ZEFRAM PLAYER NEO</title>
    <style>
        :root {
            --neon-blue: #00f2ff;
            --bg-black: #080808;
            --glass-bg: rgba(255, 255, 255, 0.08);
            --glass-border: rgba(255, 255, 255, 0.15);
        }
        body { background-color: var(--bg-black); color: #fff; font-family: sans-serif; margin: 0; overflow: hidden; }
        .screen { display: none; width: 100%; height: 100vh; position: absolute; flex-direction: column; }
        .screen.active { display: flex; }
        
        /* プレイヤー画面 */
        .player-wrapper { padding: 40px 15px; display: flex; flex-direction: column; gap: 15px; }
        header, section { background: var(--glass-bg); border: 1px solid var(--glass-border); border-radius: 20px; padding: 15px; backdrop-filter: blur(10px); }
        .app-title { color: var(--neon-blue); font-size: 1rem; text-align: center; margin: 0; letter-spacing: 2px; }
        
        /* 選曲ボタン */
        .btn-select { 
            background: transparent; border: 1px solid var(--neon-blue); color: var(--neon-blue);
            border-radius: 20px; padding: 8px 15px; font-weight: bold; cursor: pointer;
        }

        /* プレイリスト画面 */
        #screen-list { background: #000; overflow-y: auto; padding-top: 40px; }
        .list-header { padding: 15px; display: flex; justify-content: space-between; align-items: center; border-bottom: 1px solid var(--glass-border); }
        .list-item { padding: 15px; border-bottom: 1px solid var(--glass-border); display: flex; justify-content: space-between; }
        .folder-tag { color: var(--neon-blue); font-size: 11px; opacity: 0.7; }
        
        /* 簡易コントロール */
        .controls { display: flex; justify-content: space-around; align-items: center; padding: 20px 0; }
        .btn-play { width: 60px; height: 60px; border-radius: 50%; border: 2px solid var(--neon-blue); background: none; color: white; font-size: 20px; }
    </style>
</head>
<body>

<div id="screen-player" class="screen active">
    <div class="player-wrapper">
        <header><h1 class="app-title">ZEFRAM PLAYER NEO</h1></header>
        <section style="display:flex; justify-content: space-between; align-items: center;">
            <div>
                <div id="title-text" style="font-weight:bold;">TRACK NOT SELECTED</div>
                <div id="artist-text" style="color:var(--neon-blue); font-size: 0.8rem;">---</div>
            </div>
            <button class="btn-select" onclick="toggleScreen('list')">選 曲</button>
        </section>
        
        <section style="text-align:center;">
            <div id="time-display" style="font-family:monospace; font-size: 1.5rem;">00:00 / 00:00</div>
            <div class="controls">
                <button class="btn-play" id="btn-play">▶</button>
            </div>
        </section>
    </div>
</div>

<div id="screen-list" class="screen">
    <div class="list-header">
        <button class="btn-select" onclick="toggleScreen('player')">戻る</button>
        <span style="font-weight:bold;">PLAYLISTS</span>
        <button class="btn-select" onclick="document.getElementById('file-input').click()">読込</button>
    </div>
    <div id="playlist-content" style="padding: 10px;"></div>
    <input type="file" id="file-input" hidden multiple accept="audio/*, .mp3, .m4a, .wav, .aac">
</div>

<audio id="audio"></audio>

<script>
    const audio = document.getElementById('audio');
    const fileInput = document.getElementById('file-input');
    const playlistContent = document.getElementById('playlist-content');
    let playlistData = [];

    function toggleScreen(name) {
        document.querySelectorAll('.screen').forEach(s => s.classList.remove('active'));
        document.getElementById('screen-' + name).classList.add('active');
    }

    fileInput.onchange = (e) => {
        const files = e.target.files;
        if (files.length === 0) return;

        const folderName = prompt("プレイリスト名を入力してください", "K-POP") || "Unknown";
        
        for (const file of files) {
            const url = URL.createObjectURL(file);
            playlistData.push({
                title: file.name.replace(/\.[^/.]+$/, ""),
                url: url,
                folder: folderName
            });
        }
        render();
    };

    function render() {
        playlistContent.innerHTML = '';
        playlistData.forEach((song, index) => {
            const item = document.createElement('div');
            item.className = 'list-item';
            item.innerHTML = `<div><div>${song.title}</div><div class="folder-tag">${song.folder}</div></div><span>▶</span>`;
            item.onclick = () => {
                audio.src = song.url;
                document.getElementById('title-text').innerText = song.title;
                document.getElementById('artist-text').innerText = song.folder;
                audio.play();
                toggleScreen('player');
            };
            playlistContent.appendChild(item);
        });
    }

    document.getElementById('btn-play').onclick = () => {
        if (audio.paused) { audio.play(); document.getElementById('btn-play').innerText = '||'; }
        else { audio.pause(); document.getElementById('btn-play').innerText = '▶'; }
    };

    audio.ontimeupdate = () => {
        const cur = formatTime(audio.currentTime);
        const dur = formatTime(audio.duration || 0);
        document.getElementById('time-display').innerText = `${cur} / ${dur}`;
    };

    function formatTime(s) {
        const m = Math.floor(s / 60); const sc = Math.floor(s % 60);
        return `${m.toString().padStart(2, '0')}:${sc.toString().padStart(2, '0')}`;
    }
</script>
</body>
</html>
